
<div class="mt-3" style="margin-left: 20px">
  <h2>{{formName}} Employee</h2>
</div>
<form [formGroup]="employeeForm" class="p-4" (ngSubmit)="submit()">
    <div class="row">
   
      <!-- First Name -->
      <div class="col-6 mb-3">
        <label for="firstName" class="form-label">First Name<span style="color: red;">*</span></label>
        <input formControlName="firstName" id="firstName" class="form-control" 
               placeholder="Enter First Name" />
        <small
        *ngIf="employeeForm.get('firstName')?.invalid && 
                (employeeForm.get('firstName')?.touched)">
        <!-- Required Validation -->
        <span  style="color: red;" *ngIf="employeeForm.get('firstName')?.errors?.['required']">
          Required
        </span>
        <!-- Maxlength Validation -->
        <span   style="color: red;"  *ngIf="employeeForm.get('firstName')?.errors?.['maxlength']">
          First Name  should have at most 50 characters
        </span>
        <!-- Minlength Validation -->
        <span   style="color: red;" *ngIf="employeeForm.get('firstName')?.errors?.['minlength']">
          First Name  should have at least 3 characters
        </span>
      
      </small>
      </div>
  
      <!-- Last Name -->
      <div class="col-6 mb-3">
        <label for="lastName" class="form-label">Last Name<span style="color: red;">*</span></label>
        <input formControlName="lastName" id="lastName" class="form-control" 
               placeholder="Enter Last Name" />
               <small
        *ngIf="employeeForm.get('lastName')?.invalid && 
                (employeeForm.get('lastName')?.touched || employeeForm.get('lastName')?.dirty)">
        <!-- Required Validation -->
        <span  style="color: red;"  *ngIf="employeeForm.get('lastName')?.errors?.['required']">
          Required
        </span>
        <!-- Maxlength Validation -->
        <span  style="color: red;"   *ngIf="employeeForm.get('lastName')?.errors?.['maxlength']">
          Last Name  should have at most 50 characters
        </span>
        <!-- Minlength Validation -->
        <span style="color: red;" *ngIf="employeeForm.get('lastName')?.errors?.['minlength']">
          Last Name  should have at least 3 characters
        </span>
      
      </small>
      </div>
  
      <!-- Gender -->
      <div class="col-6 mb-3">
        <label class="form-label">Gender<span style="color: red;">*</span></label>
        <div>
          <div class="form-check form-check-inline">
            <input type="radio" formControlName="gender" id="genderMale" value="Male" class="form-check-input" />
            <label for="genderMale" class="form-check-label">Male</label>
          </div>
          <div class="form-check form-check-inline">
            <input type="radio" formControlName="gender" id="genderFemale" value="Female" class="form-check-input" />
            <label for="genderFemale" class="form-check-label">Female</label>
          </div>
        </div>
        <small *ngIf="employeeForm.get('gender')?.touched && employeeForm.get('gender')?.invalid" class=" d-block" style="color: red;">
          Gender is required.
        </small>
      </div>
         <!-- Date of Birth -->
         <div class="col-6 mb-3">
          <label for="dob" class="form-label">Date of Birth<span style="color: red;">*</span></label>
          <p-calendar 
          formControlName="dob"
          [iconDisplay]="'input'" 
          [showIcon]="true" 
          inputId="icondisplay"
          placeholder="Select date of birth" 
          dateFormat="dd/mm/yy"
          />
          <small *ngIf="employeeForm.get('dob')?.touched && employeeForm.get('dob')?.invalid" style="color: red;">
            Date of birth is required.
          </small>
          <small *ngIf="employeeForm.get('dob')?.hasError('ageInvalid') && employeeForm.get('dob')?.touched" style="color: red;">
            You must be at least 18 years old.
          </small>
        </div>
 
      <!-- Email -->
      <div class="col-6 mb-3">
        <label for="email" class="form-label">Email<span style="color: red;">*</span></label>
        <input type="email" formControlName="email" id="email" class="form-control" 
               placeholder="Enter Email" (blur)="checkDuplicateEmail()"/>
          <small *ngIf="employeeForm.get('email')?.touched && employeeForm.get('email')?.invalid" style="color: red;">
           Enter valid email is required.
         </small>
        <small *ngIf="serverError " style="color: red;">
                  {{serverError}}
        </small>
      </div>
  
      <!-- Mobile -->
      <div class="col-6 mb-3">
        <label for="mobile" class="form-label">Mobile<span style="color: red;">*</span></label>
        <input type="text" formControlName="mobile" id="mobile" class="form-control" 
               placeholder="Enter Mobile Number" maxlength="10" (blur)="checkDuplicateMobileNumber()"/>
        <small *ngIf="employeeForm.get('mobile')?.touched && employeeForm.get('mobile')?.invalid" style="color: red;">
          Mobile number is required.
        </small>
        <small *ngIf="numExistError " style="color: red;">
          {{numExistError}}
        </small>
        
      </div>
      <!-- Employee ID -->
      <div class="col-6 mb-3">
        <label for="designationId" class="form-label">
          Designation Name <span style="color: red;">*</span>
        </label>
        <p-dropdown
          id="designationId"
          formControlName="designationId"
          [options]="dropdownValue"
          optionLabel="designationName"
          optionValue="designationId" 
          placeholder="Select a Designation"
          [showClear]="true"
        
        ></p-dropdown>
        <small
          *ngIf="employeeForm.get('designationId')?.touched && employeeForm.get('designationId')?.invalid"
          style="color: red;"
        >
          Designation Name is required.
      </small>
        </div>
  
      <!-- Date of Joining -->
      <div class="col-6 mb-3">
        <label for="doj" class="form-label">Date of Joining<span style="color: red;">*</span></label>
        <p-calendar 
        formControlName="doj"
        [iconDisplay]="'input'" 
        [showIcon]="true" 
        inputId="icondisplay"
        placeholder="Select date of joining" 
        dateFormat="dd/mm/yy"
       />
        <small *ngIf="employeeForm.get('doj')?.touched && employeeForm.get('doj')?.invalid" style="color: red;">
          Date of joining is required.
        </small>
      </div>
  
      <!-- Date of Leave -->
      <div class="col-6 mb-3">
        <label for="dol" class="form-label">Date of Leave</label>
        <p-calendar 
        formControlName="dol"
        [iconDisplay]="'input'" 
        [showIcon]="true" 
        inputId="icondisplay"
        placeholder="Select date of leave" 
        dateFormat="dd/mm/yy"
        [minDate]=" this.employeeForm.get('doj')?.value"
      /> 
      <small *ngIf="employeeForm.get('dol')?.hasError('dolBeforeDoj') && employeeForm.get('dol')?.touched" style="color: red;">
        Date of leave must be later than the date of joining.
      </small>
      </div>
  
   
  
      <!-- Salary -->
      <div class="col-6 mb-3">
        <label for="salary" class="form-label">Salary<span style="color: red;">*</span></label>
        <input type="number" formControlName="salary" id="salary" class="form-control"   placeholder="Enter Salary" />
         <small *ngIf="employeeForm.get('salary')?.touched && employeeForm.get('salary')?.invalid" style="color: red;">
          Salary is required.
         </small>
      </div>
          <!-- Photo -->
    <!-- <div class="col-6 mb-3">
      <label for="photoPath" class="form-label">Choose a file</label><br>
      <input type="file" formControlName="photoPath"  accept="image/*" (change)="onUpload($event)">
    </div>

  </div>
  <div class="col-12"  *ngIf="imageSrc" >
    <a [href]="imageSrc" target="_blank">View Image</a>
 
      <img [src]="imageSrc" alt="Selected Image" style="max-width: 20%; height: auto;" />
  </div> -->
  <div class="float-end">
    <button type="reset" class="btn btn-danger me-3" (click)="close()">Cancel</button>
    <button type="submit" class="btn btn-primary" >Submit</button>
  </div>
  </form>
  
